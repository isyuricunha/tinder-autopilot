import{t as P,_ as L,c as U}from"./Tag.js";import{aH as H,c1 as K,c2 as N,aI as W,k as B,d as $,h as d,a6 as E,N as M,w as q,aC as G,r as y,x as j,C as J,j as S,H as Q,L as X,O as A}from"./popup/popup.js";import{_ as Y,u as Z}from"./Input.js";import{A as ee}from"./Scrollbar.js";import{s as te,_ as ne}from"./Space.js";import{b as se}from"./DescriptionsItem.js";const ae={tiny:"mini",small:"tiny",medium:"small",large:"medium",huge:"large"};function ie(t){const l=ae[t];if(l===void 0)throw new Error(`${t} has no smaller size.`);return l}const le=H({name:"DynamicTags",common:W,peers:{Input:N,Button:K,Tag:P,Space:te},self(){return{inputWidth:"64px"}}}),oe=B("dynamic-tags",[B("input",{minWidth:"var(--n-input-width)"})]),re=Object.assign(Object.assign(Object.assign({},j.props),U),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),fe=$({name:"DynamicTags",props:re,slots:Object,setup(t){const{mergedClsPrefixRef:l,inlineThemeDisabled:c}=q(t),{localeRef:m}=Z("DynamicTags"),p=G(t),{mergedDisabledRef:a}=p,g=y(""),f=y(!1),h=y(!0),C=y(null),b=j("DynamicTags","-dynamic-tags",oe,le,t,l),T=y(t.defaultValue),O=J(t,"value"),o=se(O,T),V=S(()=>m.value.add),F=S(()=>ie(t.size)),z=S(()=>a.value||!!t.max&&o.value.length>=t.max);function _(e){const{onChange:n,"onUpdate:value":s,onUpdateValue:u}=t,{nTriggerFormInput:k,nTriggerFormChange:x}=p;n&&A(n,e),u&&A(u,e),s&&A(s,e),T.value=e,k(),x()}function I(e){const n=o.value.slice(0);n.splice(e,1),_(n)}function D(e){switch(e.key){case"Enter":r()}}function r(e){const n=e??g.value;if(n){const s=o.value.slice(0);s.push(t.onCreate(n)),_(s)}f.value=!1,h.value=!0,g.value=""}function w(){r()}function R(){f.value=!0,X(()=>{var e;(e=C.value)===null||e===void 0||e.focus(),h.value=!1})}const v=S(()=>{const{self:{inputWidth:e}}=b.value;return{"--n-input-width":e}}),i=c?Q("dynamic-tags",void 0,v,t):void 0;return{mergedClsPrefix:l,inputInstRef:C,localizedAdd:V,inputSize:F,inputValue:g,showInput:f,inputForceFocused:h,mergedValue:o,mergedDisabled:a,triggerDisabled:z,handleInputKeyDown:D,handleAddClick:R,handleInputBlur:w,handleCloseClick:I,handleInputConfirm:r,mergedTheme:b,cssVars:c?void 0:v,themeClass:i?.themeClass,onRender:i?.onRender}},render(){const{mergedTheme:t,cssVars:l,mergedClsPrefix:c,onRender:m,renderTag:p}=this;return m?.(),d(ne,{class:[`${c}-dynamic-tags`,this.themeClass],size:"small",style:l,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:a,tagClass:g,tagStyle:f,type:h,round:C,size:b,color:T,closable:O,mergedDisabled:o,showInput:V,inputValue:F,inputClass:z,inputStyle:_,inputSize:I,inputForceFocused:D,triggerDisabled:r,handleInputKeyDown:w,handleInputBlur:R,handleAddClick:v,handleCloseClick:i,handleInputConfirm:e,$slots:n}=this;return this.mergedValue.map((s,u)=>p?p(s,u):d(L,{key:u,theme:a.peers.Tag,themeOverrides:a.peerOverrides.Tag,class:g,style:f,type:h,round:C,size:b,color:T,closable:O,disabled:o,onClose:()=>{i(u)}},{default:()=>typeof s=="string"?s:s.label})).concat(V?n.input?n.input({submit:e,deactivate:R}):d(Y,Object.assign({placeholder:"",size:I,style:_,class:z,autosize:!0},this.inputProps,{ref:"inputInstRef",value:F,onUpdateValue:s=>{this.inputValue=s},theme:a.peers.Input,themeOverrides:a.peerOverrides.Input,onKeydown:w,onBlur:R,internalForceFocus:D})):n.trigger?n.trigger({activate:v,disabled:r}):d(E,{dashed:!0,disabled:r,theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,size:I,onClick:v},{icon:()=>d(M,{clsPrefix:c},{default:()=>d(ee,null)})}))}})}});export{fe as _};
